<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
    <channel>
        <title>analysis on Anthony Quoc Anh Doan - Ramblings of a Happy Scientist</title>
        <link>https://mythicalprogrammer.github.io/categories/analysis/</link>
        <description>Recent content in analysis on Anthony Quoc Anh Doan - Ramblings of a Happy Scientist</description>
        <generator>Hugo -- gohugo.io</generator>
        <language>en</language>
        <lastBuildDate>Sun, 02 Mar 2025 00:00:00 +0000</lastBuildDate><atom:link href="https://mythicalprogrammer.github.io/categories/analysis/index.xml" rel="self" type="application/rss+xml" /><item>
        <title>Using Window Functions to find Islands</title>
        <link>https://mythicalprogrammer.github.io/p/using-window-functions-to-find-island/</link>
        <pubDate>Sun, 02 Mar 2025 00:00:00 +0000</pubDate>
        
        <guid>https://mythicalprogrammer.github.io/p/using-window-functions-to-find-island/</guid>
        <description>&lt;img src="https://mythicalprogrammer.github.io/p/using-window-functions-to-find-island/easter-island-3733247_1280.jpg" alt="Featured image of post Using Window Functions to find Islands" /&gt;&lt;h2 id=&#34;introduction&#34;&gt;Introduction&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;Window Functions&lt;/strong&gt; were introduced in &lt;a class=&#34;link&#34; href=&#34;https://en.wikipedia.org/wiki/SQL:2003&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;ANSI SQL:2003&lt;/a&gt;, making them a relatively new feature. They allow functions to be applied to a set of rows using the &lt;code&gt;OVER&lt;/code&gt; clause.&lt;/p&gt;
&lt;p&gt;One of the most common use cases for window functions is analytical queries, specifically identifying &lt;strong&gt;islands and gaps&lt;/strong&gt; in a dataset.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Islands&lt;/strong&gt; are groups of &lt;strong&gt;continuous&lt;/strong&gt; data sequences.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Gaps&lt;/strong&gt; are &lt;strong&gt;missing&lt;/strong&gt; sequences between data points.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;dataset&#34;&gt;Dataset&lt;/h2&gt;
&lt;p&gt;Here&amp;rsquo;s the initial dataset:&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;col1&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;2&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;3&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;11&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;12&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;13&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;27&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;33&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;34&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;35&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;42&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id=&#34;creating-the-dataset&#34;&gt;Creating the Dataset&lt;/h3&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div style=&#34;color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;
&lt;table style=&#34;border-spacing:0;padding:0;margin:0;border:0;&#34;&gt;&lt;tr&gt;&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050&#34;&gt; 1
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050&#34;&gt; 2
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050&#34;&gt; 3
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050&#34;&gt; 4
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050&#34;&gt; 5
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050&#34;&gt; 6
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050&#34;&gt; 7
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050&#34;&gt; 8
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050&#34;&gt; 9
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050&#34;&gt;10
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050&#34;&gt;11
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050&#34;&gt;12
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;;width:100%&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-sql&#34; data-lang=&#34;sql&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#719e07&#34;&gt;DROP&lt;/span&gt; &lt;span style=&#34;color:#719e07&#34;&gt;TABLE&lt;/span&gt; &lt;span style=&#34;color:#719e07&#34;&gt;IF&lt;/span&gt; &lt;span style=&#34;color:#719e07&#34;&gt;EXISTS&lt;/span&gt; table1;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#719e07&#34;&gt;CREATE&lt;/span&gt; &lt;span style=&#34;color:#719e07&#34;&gt;TEMPORARY&lt;/span&gt; &lt;span style=&#34;color:#719e07&#34;&gt;TABLE&lt;/span&gt; table1(
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  col1 &lt;span style=&#34;color:#b58900&#34;&gt;INT&lt;/span&gt; &lt;span style=&#34;color:#719e07&#34;&gt;NOT&lt;/span&gt; &lt;span style=&#34;color:#719e07&#34;&gt;NULL&lt;/span&gt; &lt;span style=&#34;color:#719e07&#34;&gt;GENERATED&lt;/span&gt; &lt;span style=&#34;color:#719e07&#34;&gt;BY&lt;/span&gt; &lt;span style=&#34;color:#719e07&#34;&gt;DEFAULT&lt;/span&gt; &lt;span style=&#34;color:#719e07&#34;&gt;AS&lt;/span&gt; &lt;span style=&#34;color:#719e07&#34;&gt;IDENTITY&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#719e07&#34;&gt;INSERT&lt;/span&gt; &lt;span style=&#34;color:#719e07&#34;&gt;INTO&lt;/span&gt; table1(col1)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#719e07&#34;&gt;VALUES&lt;/span&gt; (&lt;span style=&#34;color:#2aa198&#34;&gt;2&lt;/span&gt;), (&lt;span style=&#34;color:#2aa198&#34;&gt;3&lt;/span&gt;), (&lt;span style=&#34;color:#2aa198&#34;&gt;11&lt;/span&gt;), (&lt;span style=&#34;color:#2aa198&#34;&gt;12&lt;/span&gt;), (&lt;span style=&#34;color:#2aa198&#34;&gt;13&lt;/span&gt;), (&lt;span style=&#34;color:#2aa198&#34;&gt;27&lt;/span&gt;), (&lt;span style=&#34;color:#2aa198&#34;&gt;33&lt;/span&gt;), (&lt;span style=&#34;color:#2aa198&#34;&gt;34&lt;/span&gt;), (&lt;span style=&#34;color:#2aa198&#34;&gt;35&lt;/span&gt;), (&lt;span style=&#34;color:#2aa198&#34;&gt;42&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#719e07&#34;&gt;SELECT&lt;/span&gt; col1
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#719e07&#34;&gt;FROM&lt;/span&gt; table1
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#719e07&#34;&gt;ORDER&lt;/span&gt; &lt;span style=&#34;color:#719e07&#34;&gt;BY&lt;/span&gt; col1;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h3 id=&#34;expected-output&#34;&gt;Expected Output&lt;/h3&gt;
&lt;p&gt;After identifying &lt;strong&gt;islands&lt;/strong&gt; in the dataset, we should get the following result:&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;start_range&lt;/th&gt;
&lt;th&gt;end_range&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;2&lt;/td&gt;
&lt;td&gt;3&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;11&lt;/td&gt;
&lt;td&gt;13&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;27&lt;/td&gt;
&lt;td&gt;27&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;33&lt;/td&gt;
&lt;td&gt;35&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;42&lt;/td&gt;
&lt;td&gt;42&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h2 id=&#34;algorithmic-approach&#34;&gt;Algorithmic Approach&lt;/h2&gt;
&lt;p&gt;To solve this, we need to &lt;strong&gt;group&lt;/strong&gt; numbers that belong to the same continuous sequence (island).&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;col1&lt;/th&gt;
&lt;th&gt;grp&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;2&lt;/td&gt;
&lt;td&gt;a&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;3&lt;/td&gt;
&lt;td&gt;a&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;11&lt;/td&gt;
&lt;td&gt;b&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;12&lt;/td&gt;
&lt;td&gt;b&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;13&lt;/td&gt;
&lt;td&gt;b&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;27&lt;/td&gt;
&lt;td&gt;c&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;33&lt;/td&gt;
&lt;td&gt;d&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;34&lt;/td&gt;
&lt;td&gt;d&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;35&lt;/td&gt;
&lt;td&gt;d&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;42&lt;/td&gt;
&lt;td&gt;e&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;Each &lt;strong&gt;group (grp)&lt;/strong&gt; represents an &lt;strong&gt;island&lt;/strong&gt;, where numbers belong to a continuous sequence. For example, group &lt;strong&gt;D&lt;/strong&gt; represents the sequence &lt;strong&gt;33, 34, 35&lt;/strong&gt;.&lt;/p&gt;
&lt;h3 id=&#34;sql-implementation&#34;&gt;SQL Implementation&lt;/h3&gt;
&lt;p&gt;We can use &lt;strong&gt;window functions&lt;/strong&gt; to achieve this:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div style=&#34;color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;
&lt;table style=&#34;border-spacing:0;padding:0;margin:0;border:0;&#34;&gt;&lt;tr&gt;&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050&#34;&gt;1
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050&#34;&gt;2
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050&#34;&gt;3
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050&#34;&gt;4
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;;width:100%&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-SQL&#34; data-lang=&#34;SQL&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#719e07&#34;&gt;SELECT&lt;/span&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  col1,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  col1 &lt;span style=&#34;color:#719e07&#34;&gt;-&lt;/span&gt; ROW_NUMBER() OVER(&lt;span style=&#34;color:#719e07&#34;&gt;ORDER&lt;/span&gt; &lt;span style=&#34;color:#719e07&#34;&gt;BY&lt;/span&gt; col1) &lt;span style=&#34;color:#719e07&#34;&gt;AS&lt;/span&gt; grp
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#719e07&#34;&gt;FROM&lt;/span&gt; table1;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h3 id=&#34;output&#34;&gt;Output&lt;/h3&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;col1&lt;/th&gt;
&lt;th&gt;grp&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;2&lt;/td&gt;
&lt;td&gt;1&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;3&lt;/td&gt;
&lt;td&gt;1&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;11&lt;/td&gt;
&lt;td&gt;8&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;12&lt;/td&gt;
&lt;td&gt;8&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;13&lt;/td&gt;
&lt;td&gt;8&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;27&lt;/td&gt;
&lt;td&gt;21&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;33&lt;/td&gt;
&lt;td&gt;26&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;34&lt;/td&gt;
&lt;td&gt;26&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;35&lt;/td&gt;
&lt;td&gt;26&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;42&lt;/td&gt;
&lt;td&gt;32&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id=&#34;explanation&#34;&gt;Explanation&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;By subtracting &lt;code&gt;ROW_NUMBER() OVER(ORDER BY col1)&lt;/code&gt; from &lt;code&gt;col1&lt;/code&gt;, we create a unique identifier (&lt;code&gt;grp&lt;/code&gt;) for each island.&lt;/li&gt;
&lt;li&gt;Numbers in the &lt;strong&gt;same sequence&lt;/strong&gt; get the same &lt;code&gt;grp&lt;/code&gt; value.&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;final-query&#34;&gt;Final Query&lt;/h3&gt;
&lt;p&gt;Now, we just need to group by the &lt;code&gt;grp&lt;/code&gt; column to get the &lt;strong&gt;start&lt;/strong&gt; and &lt;strong&gt;end&lt;/strong&gt; of each island:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div style=&#34;color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;
&lt;table style=&#34;border-spacing:0;padding:0;margin:0;border:0;&#34;&gt;&lt;tr&gt;&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050&#34;&gt; 1
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050&#34;&gt; 2
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050&#34;&gt; 3
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050&#34;&gt; 4
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050&#34;&gt; 5
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050&#34;&gt; 6
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050&#34;&gt; 7
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050&#34;&gt; 8
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050&#34;&gt; 9
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050&#34;&gt;10
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050&#34;&gt;11
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050&#34;&gt;12
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;;width:100%&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-SQL&#34; data-lang=&#34;SQL&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#719e07&#34;&gt;WITH&lt;/span&gt; grp &lt;span style=&#34;color:#719e07&#34;&gt;AS&lt;/span&gt; (
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#719e07&#34;&gt;SELECT&lt;/span&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    col1,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    col1 &lt;span style=&#34;color:#719e07&#34;&gt;-&lt;/span&gt; ROW_NUMBER() OVER(&lt;span style=&#34;color:#719e07&#34;&gt;ORDER&lt;/span&gt; &lt;span style=&#34;color:#719e07&#34;&gt;BY&lt;/span&gt; col1) &lt;span style=&#34;color:#719e07&#34;&gt;AS&lt;/span&gt; grp
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#719e07&#34;&gt;FROM&lt;/span&gt; table1
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#719e07&#34;&gt;SELECT&lt;/span&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#719e07&#34;&gt;MIN&lt;/span&gt;(col1) &lt;span style=&#34;color:#719e07&#34;&gt;AS&lt;/span&gt; start_range, 
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#719e07&#34;&gt;MAX&lt;/span&gt;(col1) &lt;span style=&#34;color:#719e07&#34;&gt;AS&lt;/span&gt; end_range
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#719e07&#34;&gt;FROM&lt;/span&gt; grp
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#719e07&#34;&gt;GROUP&lt;/span&gt; &lt;span style=&#34;color:#719e07&#34;&gt;BY&lt;/span&gt; grp
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#719e07&#34;&gt;ORDER&lt;/span&gt; &lt;span style=&#34;color:#719e07&#34;&gt;BY&lt;/span&gt; start_range;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h3 id=&#34;final-output&#34;&gt;Final Output&lt;/h3&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;start_range&lt;/th&gt;
&lt;th&gt;end_range&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;2&lt;/td&gt;
&lt;td&gt;3&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;11&lt;/td&gt;
&lt;td&gt;13&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;27&lt;/td&gt;
&lt;td&gt;27&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;33&lt;/td&gt;
&lt;td&gt;35&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;42&lt;/td&gt;
&lt;td&gt;42&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h2 id=&#34;conclusion&#34;&gt;Conclusion&lt;/h2&gt;
&lt;p&gt;By leveraging &lt;strong&gt;window functions&lt;/strong&gt;, we efficiently identify &lt;strong&gt;islands&lt;/strong&gt; in a dataset using &lt;strong&gt;row numbering and grouping techniques&lt;/strong&gt;. This method can be extended to various real-world use cases, such as:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Tracking &lt;strong&gt;continuous patient visits&lt;/strong&gt; in healthcare analytics.&lt;/li&gt;
&lt;li&gt;Identifying &lt;strong&gt;consecutive login days&lt;/strong&gt; in user behavior analysis.&lt;/li&gt;
&lt;li&gt;Detecting &lt;strong&gt;gaps in financial transactions&lt;/strong&gt; for fraud detection.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;credits&#34;&gt;Credits&lt;/h2&gt;
&lt;h3 id=&#34;pictures&#34;&gt;Pictures&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://pixabay.com/photos/easter-island-rapa-nui-sculpture-3733247/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Easter island&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&#34;references&#34;&gt;References&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;SQL Example were taken from &amp;ldquo;T-SQL Window Functions, Second Edition For data analysis and beyond&amp;rdquo; by Itzik Ben-Gan&lt;/li&gt;
&lt;/ol&gt;
</description>
        </item>
        <item>
        <title>Interesting Papers I&#39;ve read this week.</title>
        <link>https://mythicalprogrammer.github.io/p/interesting-papers-i-ve-read-this-week/</link>
        <pubDate>Thu, 13 Dec 2018 00:00:00 +0000</pubDate>
        
        <guid>https://mythicalprogrammer.github.io/p/interesting-papers-i-ve-read-this-week/</guid>
        <description>&lt;img src="https://mythicalprogrammer.github.io/p/interesting-papers-i-ve-read-this-week/book-2304078_1920.jpg" alt="Featured image of post Interesting Papers I&#39;ve read this week." /&gt;&lt;h2 id=&#34;introduction&#34;&gt;Introduction&lt;/h2&gt;
&lt;p&gt;This week I had to study for a job interview at a pretty sweet place. So in preparation for it I’ve read up on statistics that I’ve listed on my resume. I’ve came across a few good papers and I’m just happy to have read it. Just wanted to post it here in case if I ever need a refresher on Bayesian.&lt;/p&gt;
&lt;h2 id=&#34;basic-master-level-statistic&#34;&gt;Basic Master Level Statistic&lt;/h2&gt;
&lt;p&gt;Introductory Mathematical Statistics Methods of Estimation and Properties of Point Estimators: Fundamental Exercises with Solutions by Dr. Olga Korosteleva&lt;/p&gt;
&lt;p&gt;This is written by my professor and it was in a neat package of overview of what I’ve learned in my master program. It is a good refresher. There were some notes I’ve written for clarifications:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
  MLE - This selects the parameter values that make the data most probable
&lt;/li&gt;
&lt;li&gt;
    Likelihood (frequentist point of view) - is a function of the parameters of a statistical model, given specific observed data.
&lt;/li&gt;
&lt;li&gt;
    Method of Moments Estimators (MOM) &amp; MLE are two estimator methods to do point estimation for parameter. This is the frequentist point of view on estimating parameters which are fixed. Where as Bayesian model parameter as a random variable and not a fixed point.
&lt;/li&gt;
&lt;li&gt;
    Fisher information - is a way of measuring the amount of information that an observable random variable X carries about an unknown parameter theta of a distribution models X.
&lt;/li&gt;
&lt;li&gt;
    Cramer-Rao Lower Bound - expresses a lower-bound on the variance of unbiased estimators of a deterministic parameter. An unbiased estimator which achieves this lower bound is efficient.
&lt;/li&gt;
&lt;li&gt;
    Sufficient Statistic - a statistic that summarize all of the information in a sample about the desired parameter. (Penn State have more clarification on this).
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;bayesian-review&#34;&gt;Bayesian Review&lt;/h2&gt;
&lt;p&gt;&lt;a class=&#34;link&#34; href=&#34;https://arxiv.org/abs/1001.4656&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;On Bayesian Data Analysis by Christian P. Robert and Judith Rousseau (August 27, 2018)&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Point estimation parameter vs parameter with distribution. Credible Interval vs Confidence Interval. Critiques of Bayesian and solutions.&lt;/p&gt;
&lt;p&gt;&lt;em&gt;An Introduction to Bayesian Statistics Without Using Equations by Tomoharu Eguchi (2008)&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;Great visualization take on how to explain Bayesian Statistic.&lt;/p&gt;
&lt;p&gt;&lt;a class=&#34;link&#34; href=&#34;https://arxiv.org/abs/1106.2697&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;A tutorial on Bayesian nonparametric models by Samuel J. Gershman and David M. Blei (2012)&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;A review what I used during my time at the FDA.&lt;/p&gt;
&lt;h2 id=&#34;credits&#34;&gt;Credits&lt;/h2&gt;
&lt;p&gt;First picture: &lt;a class=&#34;link&#34; href=&#34;https://pixabay.com/en/book-magnifying-glass-glass-2304078/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://pixabay.com/en/book-magnifying-glass-glass-2304078/&lt;/a&gt;&lt;/p&gt;
</description>
        </item>
        <item>
        <title>Things I&#39;ve learned about modeling.</title>
        <link>https://mythicalprogrammer.github.io/p/things-i-ve-learned-about-modeling/</link>
        <pubDate>Thu, 29 Nov 2018 00:00:00 +0000</pubDate>
        
        <guid>https://mythicalprogrammer.github.io/p/things-i-ve-learned-about-modeling/</guid>
        <description>&lt;img src="https://mythicalprogrammer.github.io/p/things-i-ve-learned-about-modeling/person-984236_1920.jpg" alt="Featured image of post Things I&#39;ve learned about modeling." /&gt;&lt;h2 id=&#34;introduction&#34;&gt;Introduction&lt;/h2&gt;
&lt;p&gt;I’ve been creating models for a while now.&lt;/p&gt;
&lt;p&gt;Recently read a statistical modeling book on survival analysis and I learned something new. Something that is thought provoking toward modeling.&lt;/p&gt;
&lt;p&gt;I just wanted to put my thoughts on here and see figure out where I’m going with this post when I get there.&lt;/p&gt;
&lt;h2 id=&#34;hypothesis-response-type-and-data-type&#34;&gt;Hypothesis, Response type, and Data type&lt;/h2&gt;
&lt;p&gt;I recently have a growth or a better understanding between distinction of research and given data.&lt;/p&gt;
&lt;p&gt;In the past I believe the data type is what play a role in the class and type of model you can do. Examples of type of model are longitudinal, survival, time series, etc…&lt;/p&gt;
&lt;p&gt;I know as a researcher you have to have a hypothesis first before conducting your experiment and choose your test statistic. If you don’t then you risk introducing bias.&lt;/p&gt;
&lt;p&gt;But reading a recent book, I’ve come to realize that the hypothesis is the most important thing that dictate your model and the type of data you have at hand is a close second.&lt;/p&gt;
&lt;p&gt;What the type of your response in your model dictate your modeling class (longitudinal, survival, etc..). From there you have to make sure your data can address your hypothesis which is tie to the type of your response.&lt;/p&gt;
&lt;p&gt;Again the hypothesis play a important role to modeling. It then dictate the response type which will dictate what type of data you should have. Then, the data type will dictate what model can you can do.&lt;/p&gt;
&lt;p&gt;But real life isn’t like this.&lt;/p&gt;
&lt;p&gt;The majority of data science and machine learning, you have data already. You cannot conduct experiment to generate data yourself because you are given data and expect to work on it. So you essentially skip several step and go straight to what type of data I have at hand and what class of model can I use. If you have a hypothesis it can help but if you have the wrong type of data you cannot answer it.&lt;/p&gt;
&lt;p&gt;Before I give an example, I want to say most people actually get the data and throw it in a black box algorithm and see what’s going on. Another group of people will look at the data type and see what type of model you can apply. These two cases are mostly for when you are given data and the observations are done already.&lt;/p&gt;
&lt;p&gt;When you do research, you get to dictate what you’re looking via hypothesis. Then you get to design the experiment with the type of data you need in mind. Finally the classes of algorithm you can apply is base on your hypothesis and data type.&lt;/p&gt;
&lt;p&gt;Between the given data and conducting research to get data, I am incline to believe the latter have less chances of bias.&lt;/p&gt;
&lt;h2 id=&#34;etc&#34;&gt;Etc&amp;hellip;&lt;/h2&gt;
&lt;p&gt;First picture: &lt;a class=&#34;link&#34; href=&#34;https://pixabay.com/en/person-reading-studyin-bed-books-984236/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://pixabay.com/en/person-reading-studyin-bed-books-984236/&lt;/a&gt;&lt;/p&gt;
</description>
        </item>
        <item>
        <title>Linear Mixed Effects Models for CD4&#43; Cell Counts in Men with HIV</title>
        <link>https://mythicalprogrammer.github.io/p/linear-mixed-effects-models-for-cd4-cell-counts-in-men-with-hiv/</link>
        <pubDate>Thu, 07 Jun 2018 00:00:00 +0000</pubDate>
        
        <guid>https://mythicalprogrammer.github.io/p/linear-mixed-effects-models-for-cd4-cell-counts-in-men-with-hiv/</guid>
        <description>&lt;img src="https://mythicalprogrammer.github.io/p/linear-mixed-effects-models-for-cd4-cell-counts-in-men-with-hiv/freddie-mercury-memorial-779956_640.jpg" alt="Featured image of post Linear Mixed Effects Models for CD4&#43; Cell Counts in Men with HIV" /&gt;&lt;h3 id=&#34;update&#34;&gt;Update&lt;/h3&gt;
&lt;p&gt;Busy moving. I have a summer project for this blog (look forward to it, it’ll be fun). I also a summer internship at JPL NASA!&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;You can get the &lt;a class=&#34;link&#34; href=&#34;./linear-mixed-effects.pdf&#34; &gt;pdf paper here&lt;/a&gt;.&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;I just finished my semester and I did a final project that I’m pretty proud of. I put in a lot of effort and my professor Dr. Zhou was very awesome.&lt;/p&gt;
&lt;h3 id=&#34;abstract&#34;&gt;Abstract&lt;/h3&gt;
&lt;p&gt;Human immunodeficiency virus or HIV are responsible for decline in CD4+ cell count. The investigation is set out to find the population rate of CD4+ cell count decline per milliliter of blood, to characterize the of individual rate of cell decline, and the factors that predict cell decline. Using exploratory data analysis and longitudinal tools, a linear mixed effects model with random intercept and random slope was created. The estimated population average time course of CD4+ cell depletion is 80.1857 CD4+ cells per milliliter of blood. The degree of heterogeneity across men in the rate of progression as time passes is 54.8061127978 cell count. The factors that predict cell count decline is time, pack of smoke, number of sexual partners, cesd mental illness score, age &amp;amp; time interaction, and smoke &amp;amp; time. The time factor is the most dramatic in term of CD4+ cell depletion.&lt;/p&gt;
&lt;h2 id=&#34;1-introduction&#34;&gt;1 Introduction&lt;/h2&gt;
&lt;h3 id=&#34;11-hiv-and-cd4-cells&#34;&gt;1.1 HIV and CD4+ Cells&lt;/h3&gt;
&lt;p&gt;Human immunodeficiency virus or HIV is a virus that attack immune system by killing a class of immune cell named CD4+ cell. On average a normal person without HIV have 1000 cells per milliliter of blood. As time passes from the initial HIV infection an infected person CD4+ cell counts starts to decline. Acquired immune deficiency syndrome or AIDS is the disease caused by the HIV virus.&lt;/p&gt;
&lt;h3 id=&#34;12-the-data&#34;&gt;1.2 The Data&lt;/h3&gt;
&lt;p&gt;The data used in this paper is a subset of the Multicenter AIDS Cohort Study with 369 men with HIV. The data consist of columns representing: time since seroconversion, CD4 count, age (relative to arbitrary origin), packs of cigarettes smoked per day, recreational drug use (yes/no), number of sexual partners, CESD (mental illness score), and subject ID. The data have been standardized, the measurements are unbalance, and the time interval are not evenly spaced.&lt;/p&gt;
&lt;h3 id=&#34;13-aim-of-the-investigation&#34;&gt;1.3 Aim of the Investigation&lt;/h3&gt;
&lt;p&gt;The aim of the investigation is four main points: average time course of CD4+ cell depletion, time course for individual men, to characterize the degree of heterogeneity across men in the rate of progression, and factors which predict CD4+ cell changes.&lt;/p&gt;
&lt;h2 id=&#34;2-methods&#34;&gt;2 Methods&lt;/h2&gt;
&lt;h3 id=&#34;21-exploratory-data-analysis&#34;&gt;2.1 Exploratory Data Analysis&lt;/h3&gt;
&lt;p&gt;The goal in exploratory data analysis (EDA) is to have an idea what the CD4+ cell count data looks like and ideas to go from EDA to modeling the data. Creating a response trend model will give an idea how time affect the response and if polynomial time is needed. A variogram graph will indicate what kind of variance is needed to be account for in the model. There are three different kind of variance either random effect variance, within-subject variance, and between-subject variance are needed.&lt;/p&gt;
&lt;h3 id=&#34;22-modeling-longitudinal-data&#34;&gt;2.2 Modeling Longitudinal Data&lt;/h3&gt;
&lt;p&gt;The next step is to create a suitable longitudinal model for the CD4+ cell data to answer the aim of this investigation. The model that will be chosen will have to address the variances that was shown in the variogram during EDA. After the model is selected the next step will be predictor selection. The predictor selection will be base on the deviance test of the full and the reduced model. Deviance test will be perform because the comparison are base on nested models.&lt;/p&gt;
&lt;h3 id=&#34;23-assumptions&#34;&gt;2.3 Assumptions&lt;/h3&gt;
&lt;p&gt;The assumptions this investigation made is there are between-subject variations, within-subject variations, and measurement variations that need to be explicitly accounted for. The chosen longitudinal model will account for these explicitly so that the investigation can have an accurate and precise answers to the aim of this investigation.&lt;/p&gt;
&lt;p&gt;Between-subject is latent factors. Latent factors are biological variability examples are diet, genetics, and other latent factors. Latent factors can keep an individuals CD4+ cell count consistently higher than the population mean or lower than the population mean.&lt;/p&gt;
&lt;p&gt;The within-subject variation is serial correlation. The serial correlation is induced by time, the close two measurements are the more correlated they are. The farther apart two measurements are the less correlated they are.&lt;/p&gt;
&lt;p&gt;Measurement variation takes into account for the process of taking measurements is an imperfect process and that there will be some variation in taking CD4+ cell count measurement. A variogram with force equally spacing of time intervals will confirm these assumptions of variations exist in the CD4+ cell count data.&lt;/p&gt;
&lt;h2 id=&#34;3-results&#34;&gt;3 Results&lt;/h2&gt;
&lt;h3 id=&#34;31-exploratory-data-analysis-results&#34;&gt;3.1 Exploratory Data Analysis Results&lt;/h3&gt;
&lt;p align=&#34;center&#34;&gt; &lt;img title=&#34;CD4+ Cells Spaghetti Plot&#34; width=&#34;80%&#34; src=&#34;1_cd4.png&#34; /&gt; &lt;/p&gt;
&lt;p&gt;Figure 1: A graph between the response of the CD4+ cell count on the y-axis and the time points on the x-axis.&lt;/p&gt;
&lt;p&gt;The spaghetti plot, Figure 1, shows that the data is unbalanced and that the time intervals are irregular and unequaled. It also show that individual have different base line which imply random intercept and that individual have different rate of progression which imply random slope. This will help in model selection especially when certain covariance structure have assumption about balance data and equally spaced time intervals.&lt;/p&gt;
&lt;p align=&#34;center&#34;&gt; &lt;img title=&#34;CD4+ Cells Population Trend Plot&#34; width=&#34;80%&#34; src=&#34;2_cd4.png&#34; /&gt; &lt;/p&gt;
&lt;p&gt;Figure 2: A graph between the response of the CD4+ cell count on the y-axis and the time points on the x-axis.&lt;/p&gt;
&lt;p&gt;The response trend graph, Figure 2, indicate that perhaps time is not constant but some sort of polynomial. Between time point 0 and 2 months there is a sharp drop in CD4+ cell count and closer to the 2 month time point the CD4+ cell count rate of decline starts to steady out and the sharp decrease rate is slowed down drastically. Modeling the data with quadratic or cubic time predictor may be needed base on this graph.&lt;/p&gt;
&lt;p align=&#34;center&#34;&gt; &lt;img title=&#34;CD4+ Variogram&#34; width=&#34;80%&#34; src=&#34;3_cd4.png&#34; /&gt; &lt;/p&gt;
&lt;p&gt;Figure 3: A variogram of the CD4+ cell count data with time intervals forced to be equally space.&lt;/p&gt;
&lt;p&gt;Next is a plotted variogram (Figure 3) to check the assumption of having three sources of variation. Due to the data having unequaled time intervals the measurements are averaged and binned to the nearest time point. The blue line represent that variogram line and the grey horizontal line represents total variance.&lt;/p&gt;
&lt;p&gt;Looking at Figure 3, the variogram blue solid line does not start at zero it indicate that there exist measurement errors. The variogram is not a flat blue line but a slanted line with a slope indicating that there exist serial correlation. Finally the blue line does not touched the upper limit of total variance indicating that there is random effect in play. The assumption that the CD4+ cell count data have all three sources of variation can be safely assume and is verified empirically.&lt;/p&gt;
&lt;h3 id=&#34;32-model-selection-and-rejected-models&#34;&gt;3.2 Model Selection and Rejected Models&lt;/h3&gt;
&lt;p&gt;Longitudinal analysis have many linear models that to choose from. Models such as unstructured covariance and structured covariance. This section will discuss the reason for not choosing certain models.&lt;/p&gt;
&lt;p&gt;Unstructured covariance is ruled out for two reasons. The first reason being that the large data set and large number of predictors would result in a large amount of parameter estimations. The second reason is that unstructured covariance is unsuitable for data set that have measurement taken at unequally spaced intervals.&lt;/p&gt;
&lt;p&gt;Toeplitz covariance structure and autoregressive covariance structure both are other choices of structured covariance model. Both toeplitz and autoregressive assume that measurements are made at equal intervals of time. The CD4+ cell data have irregular unequal intervals of time.&lt;/p&gt;
&lt;p&gt;The variogram shows there are three sources of variation. Independent model is rejected because the model assume there is only measurement error. Uniform model is also rejected because it only address two sources of variation, measurement error and between-individual variation. Exponential covariance model is rejected because the model address only within-individual variation.&lt;/p&gt;
&lt;p&gt;Linear mixed effects models is chosen is because the model addresses all three sources of variation. The model explicitly distinguished between fixed and random effects. The advantage of this explicit distinction enable accurate and precise answers to the aim of this investigation.&lt;/p&gt;
&lt;h3 id=&#34;33-predictor-selection&#34;&gt;3.3 Predictor Selection&lt;/h3&gt;
&lt;table&gt;
    &lt;thead&gt;
        &lt;tr&gt;
            &lt;th style=&#34;text-align: left&#34;&gt;Predictors    
            &lt;th style=&#34;text-align: center&#34;&gt;   β_hat values   
            &lt;th style=&#34;text-align: right&#34;&gt;   p-values for t-test
    &lt;tbody&gt;
        &lt;tr&gt;
            &lt;td style=&#34;text-align: left&#34;&gt;intercept
            &lt;td style=&#34;text-align: center&#34;&gt;790.11
            &lt;td style=&#34;text-align: right&#34;&gt;&amp;lt;.0001
        &lt;tr&gt;
            &lt;td style=&#34;text-align: left&#34;&gt;time
            &lt;td style=&#34;text-align: center&#34;&gt;-81.6092
            &lt;td style=&#34;text-align: right&#34;&gt;&amp;lt;.0001
        &lt;tr&gt;
            &lt;td style=&#34;text-align: left&#34;&gt;age
            &lt;td style=&#34;text-align: center&#34;&gt;1.6277
            &lt;td style=&#34;text-align: right&#34;&gt;0.3790
        &lt;tr&gt;
            &lt;td style=&#34;text-align: left&#34;&gt;smoke
            &lt;td style=&#34;text-align: center&#34;&gt;41.0459
            &lt;td style=&#34;text-align: right&#34;&gt;&amp;lt;.0001
        &lt;tr&gt;
            &lt;td style=&#34;text-align: left&#34;&gt;drug
            &lt;td style=&#34;text-align: center&#34;&gt;22.6537
            &lt;td style=&#34;text-align: right&#34;&gt;0.2677
        &lt;tr&gt;
            &lt;td style=&#34;text-align: left&#34;&gt;partners
            &lt;td style=&#34;text-align: center&#34;&gt;6.5509
            &lt;td style=&#34;text-align: right&#34;&gt;0.0043
        &lt;tr&gt;
            &lt;td style=&#34;text-align: left&#34;&gt;cesd
            &lt;td style=&#34;text-align: center&#34;&gt;-2.3499
            &lt;td style=&#34;text-align: right&#34;&gt;0.0070
        &lt;tr&gt;
            &lt;td style=&#34;text-align: left&#34;&gt;age × time
            &lt;td style=&#34;text-align: center&#34;&gt;-1.3805
            &lt;td style=&#34;text-align: right&#34;&gt;0.0317
        &lt;tr&gt;
            &lt;td style=&#34;text-align: left&#34;&gt;smoke × time
            &lt;td style=&#34;text-align: center&#34;&gt;-14.2323
            &lt;td style=&#34;text-align: right&#34;&gt;&amp;lt;.0001
        &lt;tr&gt;
            &lt;td style=&#34;text-align: left&#34;&gt;drug × time
            &lt;td style=&#34;text-align: center&#34;&gt;-1.7315
            &lt;td style=&#34;text-align: right&#34;&gt;0.8488
        &lt;tr&gt;
            &lt;td style=&#34;text-align: left&#34;&gt;partners × time
            &lt;td style=&#34;text-align: center&#34;&gt;-0.3958
            &lt;td style=&#34;text-align: right&#34;&gt;0.7161
        &lt;tr&gt;
            &lt;td style=&#34;text-align: left&#34;&gt;cesd × time
            &lt;td style=&#34;text-align: center&#34;&gt;0.1585
            &lt;td style=&#34;text-align: right&#34;&gt;0.6899
        &lt;tr&gt;
            &lt;td style=&#34;text-align: left&#34;&gt;time^2
            &lt;td style=&#34;text-align: center&#34;&gt;0.8753
            &lt;td style=&#34;text-align: right&#34;&gt;0.6187
&lt;/table&gt;
&lt;p&gt;Table 1: Full linear mixed effects model estimate.&lt;/p&gt;
&lt;p&gt;After choosing the linear fixed effects model with random intercept and random slope to model the data, the next part is selecting a good combination of predictors that describe the CD4+ cell count data. A full model is fitted first. From Table 1, which show the estimated β, predictors that are not significant at p-value of 0.05 will be dropped and the predictors that are significant will be kept as a reduced model. Note the time^2 was included in the full model because of the nonlinear trend of time that was indicated in the response trend graph.&lt;/p&gt;
&lt;p&gt;The predictors that are dropped are drug, drug × time, partners × time, cesd × time, and time^2. Even though the age predictor is not significant the interaction age × time is significant therefore the age predictor is kept in the reduced model.&lt;/p&gt;
&lt;table&gt;
    &lt;thead&gt;
        &lt;tr&gt;
            &lt;th style=&#34;text-align: left&#34;&gt;   
            &lt;th style=&#34;text-align: center&#34;&gt;   Full Model   
            &lt;th style=&#34;text-align: right&#34;&gt;   Reduced Model
    &lt;tbody&gt;
        &lt;tr&gt;
            &lt;td style=&#34;text-align: left&#34;&gt;intercept
            &lt;td style=&#34;text-align: center&#34;&gt;790.11
            &lt;td style=&#34;text-align: right&#34;&gt;&amp;lt;.0001
        &lt;tr&gt;
            &lt;td style=&#34;text-align: left&#34;&gt;-2 Log Likelihood
            &lt;td style=&#34;text-align: center&#34;&gt;33603.4
            &lt;td style=&#34;text-align: right&#34;&gt;33600.9
        &lt;tr&gt;
            &lt;td style=&#34;text-align: left&#34;&gt;χ2 Test
            &lt;td style=&#34;text-align: center&#34;&gt;2.5
            &lt;td style=&#34;text-align: right&#34;&gt;2.5
        &lt;tr&gt;
            &lt;td style=&#34;text-align: left&#34;&gt;Statistic Degree of Freedom
            &lt;td style=&#34;text-align: center&#34;&gt;13
            &lt;td style=&#34;text-align: right&#34;&gt;8
        &lt;tr&gt;
            &lt;td style=&#34;text-align: left&#34;&gt;χ2 25,0.95
            &lt;td style=&#34;text-align: center&#34;&gt;11.070
            &lt;td style=&#34;text-align: right&#34;&gt;11.070
&lt;/table&gt;
&lt;p&gt;Table 2: Likelihood Ratio test for two linear mixed effect models.&lt;/p&gt;
&lt;p&gt;Hypothesis H1: Reduced Linear Mixed Effects Model Hypothesis H2: Full Linear Mixed Effects Model&lt;/p&gt;
&lt;p&gt;After fitting the reduced model, a likelihood ratio test was conducted between the full model and the reduced model. Table 2 shows the χ2 test statistic at 2.5 which is the difference between the -2 Log Likelihood of full model and reduced model. The degree of freedom for χ2 is the difference between the number of parameters in the full model and the number of parameters in the reduced model which is 5. The null hypothesis for the deviance test is the reduced model and the alternative hypothesis is the full model. Since the test statistic is 2.5 which is much less than 11.070, the reduced model is chosen.&lt;/p&gt;
&lt;h3 id=&#34;34-final-model&#34;&gt;3.4 Final Model&lt;/h3&gt;
&lt;p&gt;The equation listed below is the selected model that best represent the CD4+ cell count data and the best explanation of the data. With this model, the investigation can proceed to answer the aim of the investigation.&lt;/p&gt;
&lt;p&gt;Yij = β0 + β1 timeij + β2 ageij + β3 smokeij + β4 partnersij + β5 cesdij + β6 ageij × timeij + β7 smokeij × timeij + b0i + b1i × timeij + eij
&lt;/p&gt;
&lt;p&gt;=791.05 − 80.1857timeij + 1.4697ageij + 38.0785smokeij + 7.0434partnersij − 2.2867 cesdij − 1.3400 ageij × timeij − 13.2674 smokeij × timeij + b0i + b1i timeij + eij (1)
&lt;/p&gt;
&lt;p&gt;Where b0i represents the random intercept for each individual and b1i represents the random slope for each individual.&lt;/p&gt;
&lt;p&gt;The model can be rewritten in matrix notation&lt;/p&gt;
&lt;p&gt;Yi=Xiβ+Zibi +ei, i=1,…,N,j=1,…,ni (2)
where Y i is a vector of size ni × 1 representing observations for ith individual, j represent the jth measurement for ith individual, Xi is a ni × p design matrix of p independent fixed effect variables, Zi is a ni × q design matrix of q independent random effect variables, β is a vector of size p × 1 representing fixed effect parameters, bi is an independent vector of q × 1 size representing random effects with MVN(0,G) distribution (Multivariate Normal), and ei represents an independent vector of random errors of size ni ×1 with MVN(0,Ri) distribution. The ei are independent of bi.&lt;/p&gt;
&lt;p&gt;The Ri represent within-subject variance. Linear fixed effects model break Ri down into two sources of within-subject variance, serial correlation and measurement error. The measurement error variance (τ^2) is equal to 59104. The serial correlation variance (σ^2) is 1.0649. The G matrix represents the between-subject variance.&lt;/p&gt;
&lt;p&gt;See paper for more matrix notations… &amp;gt;&lt;em&gt;__&lt;/em&gt;&amp;lt;&lt;/p&gt;
&lt;h2 id=&#34;etc&#34;&gt;Etc…&lt;/h2&gt;
&lt;p&gt;Please see paper for results, SAS codes, R codes, and conclusion. The blog post is getting long.&lt;/p&gt;
&lt;h2 id=&#34;post-mordem&#34;&gt;Post Mordem&lt;/h2&gt;
&lt;p&gt;Well… translating a paper into a blog post is terrible. The paper is too academic with high domain assumption and an abstract and a link to the paper is sufficient.&lt;/p&gt;
&lt;h3 id=&#34;etc-1&#34;&gt;Etc..&lt;/h3&gt;
&lt;p&gt;&lt;a href=&#34;https://pixabay.com/en/freddie-mercury-memorial-statue-779956/&#34;&gt;The Freddie Mercury picture is taken from pixabay.&lt;/a&gt;</description>
        </item>
        <item>
        <title>Light Novel Analysis (part 1)</title>
        <link>https://mythicalprogrammer.github.io/p/light-novel-analysis-part-1/</link>
        <pubDate>Mon, 17 Jul 2017 00:00:00 +0000</pubDate>
        
        <guid>https://mythicalprogrammer.github.io/p/light-novel-analysis-part-1/</guid>
        <description>&lt;img src="https://mythicalprogrammer.github.io/p/light-novel-analysis-part-1/lightnovel.jpg" alt="Featured image of post Light Novel Analysis (part 1)" /&gt;&lt;h1 id=&#34;introduction&#34;&gt;Introduction&lt;/h1&gt;
&lt;p&gt;I’m into light novels so I’ve decided to combine my love for data science and light novel.&lt;/p&gt;
&lt;h1 id=&#34;information-retrieval&#34;&gt;Information Retrieval&lt;/h1&gt;
&lt;p&gt;I started out by retrieving some data from online via scraping using &lt;a class=&#34;link&#34; href=&#34;https://scrapy.org&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;scrapy&lt;/a&gt;. I love &lt;a class=&#34;link&#34; href=&#34;https://scrapy.org&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;scrapy&lt;/a&gt; and highly recommend it for any serious web scrapping task.&lt;/p&gt;
&lt;h1 id=&#34;the-data&#34;&gt;The Data&lt;/h1&gt;
&lt;p&gt;So what does the data look like?&lt;/p&gt;
&lt;p&gt;2739 novels.&lt;/p&gt;
&lt;p&gt;It’s in a json format.&lt;/p&gt;
&lt;p&gt;The columns are novel title, description, novel type, genre, tags, rating, language, authors, year, and license.&lt;/p&gt;
&lt;h1 id=&#34;exploratory-data-analysis&#34;&gt;Exploratory Data Analysis&lt;/h1&gt;
&lt;p&gt;For this portion I will be using R to do some EDA (❤ &lt;a class=&#34;link&#34; href=&#34;https://en.wikipedia.org/wiki/John_Tukey&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;John Tukey&lt;/a&gt;).&lt;/p&gt;
&lt;p&gt;There are eight languages in the data including 7 novels with no language category.&lt;/p&gt;
&lt;p&gt;The languages are: Japanese, Chinese, Korean, Malaysian, Filipino, Indonesian, Thai, and Vietnamese.&lt;/p&gt;
&lt;div id=&#34;chart-donut-totalnovel-by-country&#34;&gt;&lt;/div&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;Languages&lt;/th&gt;
&lt;th&gt;Number of Novels&lt;/th&gt;
&lt;th&gt;Average Ratings&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;Japanese&lt;/td&gt;
&lt;td&gt;1496&lt;/td&gt;
&lt;td&gt;3.994248&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Chinese&lt;/td&gt;
&lt;td&gt;1059&lt;/td&gt;
&lt;td&gt;3.978571&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Korean&lt;/td&gt;
&lt;td&gt;131&lt;/td&gt;
&lt;td&gt;4.142424&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Filipino&lt;/td&gt;
&lt;td&gt;23&lt;/td&gt;
&lt;td&gt;NA&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Indonesian&lt;/td&gt;
&lt;td&gt;12&lt;/td&gt;
&lt;td&gt;NA&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Thai&lt;/td&gt;
&lt;td&gt;7&lt;/td&gt;
&lt;td&gt;NA&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Malaysian&lt;/td&gt;
&lt;td&gt;3&lt;/td&gt;
&lt;td&gt;NA&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Vietnamese&lt;/td&gt;
&lt;td&gt;1&lt;/td&gt;
&lt;td&gt;NA&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Uncategorized&lt;/td&gt;
&lt;td&gt;7&lt;/td&gt;
&lt;td&gt;NA&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;The average ratings only include novels that have at least 30 user ratings.&lt;/p&gt;
&lt;p&gt;I did not take any other rating from other countries because there are less than 30 novels. As a statistician I feel 30 or more is a sufficient number to represent the population for each category anything smaller than is insufficient.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://mythicalprogrammer.github.io/p/light-novel-analysis-part-1/all_rating.png&#34;
	width=&#34;1134&#34;
	height=&#34;774&#34;
	srcset=&#34;https://mythicalprogrammer.github.io/p/light-novel-analysis-part-1/all_rating_hu657ccce2bd9db624f452d8d6a0b45f9d_67124_480x0_resize_box_3.png 480w, https://mythicalprogrammer.github.io/p/light-novel-analysis-part-1/all_rating_hu657ccce2bd9db624f452d8d6a0b45f9d_67124_1024x0_resize_box_3.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;A bar graph of all ratings&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;146&#34;
		data-flex-basis=&#34;351px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;I plot a histogram plot for all novels from all countries with 30 or more user ratings. It is left skewed. While I can only speculate that people tend to rate for their favorite novels. It’s interesting because there is quite a lot of quality novels out there and many hover above 4.0 rating out of 5.0.&lt;/p&gt;
&lt;p&gt;There is a small number with perfect five ratings. 19 novels with 5 ratings all of them have single digit number of users reviews except for one (“Mum, I Used to Hate You”). It have 18 users that reviewed it with a 5 rating.&lt;/p&gt;
&lt;p&gt;Sweet let’s find novels that have high rating and at least 30 user reviews! I tried 4.5 at first but it’s a huge list at least 300+ so I decided to look for 4.7 ratings. There is exactly 75 novels with that criteria.&lt;/p&gt;
&lt;p&gt;Here’s the list and hope you guys find it useful.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;A Game To Make Him Fall
A Will Eternal
A Slight Smile is Very Charming
Ame no Hi no Iris
At the Northern Fort
By A Slight Mistake
Cultivation Chat Group
Clockwork Planet
Demon Girl ~Tale of a Lax Demon~
Dungeon Defense
Eight Treasures Trousseau
Gekkou
Golden Age Legitimate Fei
Hokuou Kizoku to Moukinzuma no Yukiguni Karigurashi
Hiraheishi wa Kako o Yumemiru
Hikaru ga Chikyuu ni Itakoro……
I Reincarnated into an Otome Game as a Villainess With Only Destruction Flags…
I Don’t Like The World, I Only Like You
It’s Because You Said There Would Be Candy!!
Joy of Life
Kenkyo, Kenjitsu o Motto ni Ikite Orimasu
Kaze no Stigma
Kono Kamen no Akuma ni Sodan wo!
Kuzu to Kinka no Qualidea
Manuscript Screening Boy and Manuscript Submitting Girl
Marietta-hime no Konrei
Marginal Operation
Maoyuu Maou Yuusha
Mimizuku to Yoru no Ou
Mondaiji-tachi ga Isekai kara Kuru Sou Desu yo?
Mulberry Song
My Death Flags Show No Sign of Ending
No Game No Life
Nobunaga’s Imouto is My Wife
Ookami to Koushinryou
Overlord (LN)
Ouroboros Record ~Circus of Oubeniel~
Our Second Master
Quickly Wear the Face of the Devil
Rakuin no Monshou
Rain
Release that Witch
Running Away From The Hero!
Sansheng, Wangchuan Wu Shang
Semi Datte Tensei Sureba Ryuu Ni Naru
Sweet Heart in Honeyed Desire
Tabi ni Deyou, Horobiyuku Sekai no Hate Made
The Bathroom Goddess
The Destruction of a Triad Boss Trilogy
The Girl Who Bore the Flame Ring
The Girl Who Ate a Death God
The Founder of Diabolism
The Legend of Sun Knight
The Grandmaster Strategist
The Magnificent Battle Records of A Former Noble Lady
The Princess Wei Yang
The Probability I Can Kill My Wife Without Being Found Out
The Other World Dining Hall (LN)
The Rebirth of the Malicious Empress of Military Lineage
The Scum Villain’s Self-Saving System
The Tang Dynasty’s Female Forensic Doctor
The Witch and the Gourd of Stories
To Be A Virtuous Wife
Three Days of Happiness
Uchi no Musume no Tame naraba, Ore wa Moshikashitara Maou mo Taoseru kamo Shirenai (LN)
Uchi no Musume no Tame naraba, Ore wa Moshikashitara Maou mo Taoseru kamo Shirenai (WN)
Tsuyokute New Saga (LN)
Vermillion
Utsuro no Hako to Zero no Maria
Why Is the Prettiest Girl in School Trying to Talk to a Loner Like Me during Lunch Break?
When He Comes, Close Your Eyes
Virtual World: Peerless White Emperor
Woof Woof Story ~ I Told You I am a Rich Person’s Dog, Not Fenrir ~
Yahari Ore no Seishun Love Come wa Machigatte Iru
Youjo Senki
&lt;/code&gt;&lt;/pre&gt;
&lt;h1 id=&#34;conclusion&#34;&gt;Conclusion&lt;/h1&gt;
&lt;p&gt;I think I’ll be doing more light novel analysis in the future.&lt;/p&gt;
&lt;p&gt;I think I’ll do NLP too something like sentiment analysis or something for those tags and categories. Of course this is when I have time.&lt;/p&gt;
&lt;h1 id=&#34;what-did-i-get-to-practice-for-me&#34;&gt;What Did I Get to Practice? (for me)&lt;/h1&gt;
&lt;ul&gt;
&lt;li&gt;My data science &amp;amp; statistic skills using R.&lt;/li&gt;
&lt;li&gt;My web scraping skill using scrapy.&lt;/li&gt;
&lt;li&gt;My devops skill, I made a custom vagrant for jekyll and used ansible to self provision. I created a new blog just for this post.&lt;/li&gt;
&lt;li&gt;I made a yummy pie chart.&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id=&#34;etc&#34;&gt;Etc..&lt;/h1&gt;
&lt;p&gt;The novel picture is taken from google searching for a CC license image.&lt;/p&gt;
&lt;script type=&#34;text/javascript&#34; src=&#34;https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.17/d3.min.js&#34;&gt;&lt;/script&gt;
&lt;script type=&#34;text/javascript&#34; src=&#34;https://cdnjs.cloudflare.com/ajax/libs/c3/0.4.14/c3.min.js&#34;&gt;&lt;/script&gt;
&lt;script type=&#34;text/javascript&#34; src=&#34;./js/lightnovel_novelbycountry_donut.js&#34;&gt;&lt;/script&gt;
</description>
        </item>
        
    </channel>
</rss>
